<!DOCTYPE html>
<html lang="en" ng-app="store">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
	<link href="styles.css" rel="stylesheet">
</head>
<body>
	<div ng-controller="StoreController as store">

		<ul class="list-group">
			<li class="list-group-item" ng-repeat="product in store.products">

				<product-title></product-title>

				<div ng-show="product.images.length" ng-controller="GalleryController as gallery">
					<img ng-src="{{ product.images[gallery.current].full }}"  width="330" />
					<ul class="list-inline thumbs">
						<li class="thumbnail" ng-repeat="image in product.images" ng-click="gallery.setCurrent($index)">
							<img ng-src="{{image.thumb}}"  width="100" />
						</li>
					</ul>
					
				</div>

				<section class="tab" ng-controller="TabController as tab">
					<ul class="nav nav-pills">
						<li ng-class="{active: tab.isSet(1)}">
							<a href ng-click="tab.setTab(1)">Description</a></li>
						<li ng-class="{active: tab.isSet(2)}">
							<a href ng-click="tab.setTab(2)">Specs</a></li>
						<li ng-class="{active: tab.isSet(3)}">
							<a href ng-click="tab.setTab(3)">Reviews</a></li>
					</ul>
					
					<!-- 1. let's create a new template file for the Description tag -->
					<!-- 1.1 make sure to include the new template (let's use ng-include for now). -->
					<product-description ng-show="tab.isSet(1)"></product-description>
					
					<!-- 3.1 Next let's create an Attribute directive for the Specs tab -->
					<div ng-show="tab.isSet(2)" product-specs>
						<!-- <h4>Specs</h4>
						<blockquote>Shine: {{ product.shine }}</blockquote> -->
					</div>
					<div ng-show="tab.isSet(3)">
						<h4>Reviews</h4>
						<ul>
							<li ng-repeat="review in product.reviews">
								<blockquote>
									<strong> {{review.stars}} Stars </strong>
									{{review.body}}
									<cite class="clearfix">—{{review.author}}</cite>
									
								</blockquote>
							</li>													
						</ul>

						<form name="reviewForm" ng-controller="ReviewController as reviewCtrl" ng-submit="reviewForm.$valid && reviewCtrl.addReview(product)" novalidate>
							<!--  Review Form -->
							<h4>Submit a Review</h4>
							<fieldset class="form-group">
							
								<select ng-model="reviewCtrl.review.stars" class="form-control" ng-options="stars for stars in [5,4,3,2,1]"  title="Stars" required>
									<option value="">Rate the Product</option>
								</select>
							</fieldset>
							<fieldset class="form-group">
								<textarea ng-model="reviewCtrl.review.body" class="form-control" placeholder="Write a short review of the product..." title="Review" required></textarea>
							</fieldset>
							
							<fieldset class="form-group">
								<input type="email" ng-model="reviewCtrl.review.author" class="form-control" placeholder="jimmyDean@example.org" title="Email" required />
							</fieldset>
							
							reviewForm is {{ reviewForm.$valid }}

							<fieldset class="form-group">
								<input type="submit" class="btn btn-primary pull-right" value="Submit Review" />
							</fieldset>

							<!--  Live Preview -->
							<blockquote>
								<h4>Preview your review:</h4>

								<strong>{{reviewCtrl.review.stars}} Stars</strong>
								{{reviewCtrl.review.body}}
								<cite class="clearfix">—{{reviewCtrl.review.author}} </cite>
							</blockquote>

						</form>

					</div>
				</section>
			</li>
		</ul>

	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
	<script src="app.js"></script>
</body>
</html>